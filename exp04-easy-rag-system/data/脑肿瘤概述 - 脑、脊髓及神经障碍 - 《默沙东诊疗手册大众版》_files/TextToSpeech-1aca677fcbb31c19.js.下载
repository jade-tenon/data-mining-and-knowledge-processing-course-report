(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8364],{49452:function(e,t,n){"use strict";var r=n(85893),l=n(67294),o=n(5817),c=n(22556),a=n(79515),s=n.n(a),i=n(4098),u=n(57823),d=n(33326),m=n(32862),v=n(83488);let h=e=>{let{t}=(0,c.QT)(),{sitecoreContext:n}=(0,m.z)(),[a,h]=(0,l.useState)(!1),p=(0,l.useRef)(null),x=null==window?void 0:window.speechSynthesis,{showSpeechOverlay:T,setShowSpeechOverlay:S,direction:_,setTooltipShow:f,resizing:w}=(0,l.useContext)(o.ZP),{dontWrapInTimeout:y}=e,I=()=>{var e,t,r;(null==n?void 0:null===(e=n.language)||void 0===e?void 0:e.toLocaleLowerCase())!=="uk"&&(null==n?void 0:null===(t=n.language)||void 0===t?void 0:t.toLocaleLowerCase())!=="uk-ua"&&(null==n?void 0:null===(r=n.language)||void 0===r?void 0:r.toLocaleLowerCase())!=="sw"?S(!T):(S(!1),h(!0)),!T&&x&&x.cancel()},b=()=>{if(y){I();return}setTimeout(()=>{I()},0)};(0,l.useEffect)(()=>()=>{x&&x.cancel()},[]);let g=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=()=>{if(g.current&&(null==p?void 0:p.current)){let e=p.current.querySelector("#popover-sidebar"),t=(null==e?void 0:e.offsetHeight)||0,n=g.current.offsetHeight;g.current.style.top="".concat(Math.round((t-n)/2),"px")}};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[w,T,null==e?void 0:e.showTextToSpeechOverlay]),(0,r.jsxs)(r.Fragment,{children:[(a||(null==e?void 0:e.showTextToSpeechModal))&&(0,r.jsxs)(i.Z,{show:a||(null==e?void 0:e.showTextToSpeechModal),contentClassName:"".concat(s().modalContent),className:s().modalPopup,centered:!0,children:[(0,r.jsx)("div",{className:s().title,children:t("TTSnotsupported")}),(0,r.jsx)("button",{onClick:()=>{h(!1),S(!0),f(!1),(null==e?void 0:e.setShowTextToSpeechModal)&&(null==e||e.setShowTextToSpeechModal())},children:t("TTSok")})]}),(0,r.jsx)("div",{ref:p,children:(0,r.jsx)("button",{onClick:b,className:"".concat(s().textToSpeechIcon," ").concat((null==e?void 0:e.buttonClassNameString)||""),"aria-label":t("TexttoSpeech"),onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:(0,r.jsx)(v.default,{height:(null==e?void 0:e.speakerHeight)||28,width:(null==e?void 0:e.speakerWidth)||35,className:(null==e?void 0:e.speakerIconClassName)||""})})}),!a&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u.Z,{show:T||(null==e?void 0:e.showTextToSpeechOverlay),target:p.current,placement:"rtl"===_?"right":"left",container:p,containerPadding:20,rootClose:!1,children:(0,r.jsxs)("div",{id:"popover-sidebar",className:"".concat(s().accordianPopover," show popover ").concat("ltr"===_?"bs-popover-start":"bs-popover-end"),children:[(0,r.jsx)("div",{ref:g,className:"popover-arrow"}),(0,r.jsx)(d.Z,{setShowTextToSpeechOverlay:null==e?void 0:e.setShowTextToSpeechOverlay,showTextToSpeechOverlay:null==e?void 0:e.showTextToSpeechOverlay,setAccessibilityFocus:null==e?void 0:e.setAccessibilityFocus,setFocusOnTabKeyPress:null==e?void 0:e.setFocusOnTabKeyPress})]})})})]})};t.Z=h},33326:function(e,t,n){"use strict";var r=n(85893),l=n(67294),o=n(63649),c=n(5817),a=n(79515),s=n.n(a),i=n(32862),u=n(22556),d=n(69998);let m=e=>{var t,n;let{t:a}=(0,u.QT)(),{sitecoreContext:m}=(0,i.z)(),{direction:v,setShowSpeechOverlay:h,currentTopicId:p,pageHeaderCurrentHeight:x}=(0,l.useContext)(c.ZP),[T,S]=(0,l.useState)(0),[_,f]=(0,l.useState)(null),[w,y]=(0,l.useState)(!1),I=window.speechSynthesis,[b,g]=(0,l.useState)(()=>{let e=localStorage.getItem("speechRate");return e?parseFloat(e):(null==m?void 0:m.language)==="ar"?.75:1}),N=(0,l.useRef)(null),B=null==window?void 0:null===(t=window.navigator)||void 0===t?void 0:null===(n=t.userAgent)||void 0===n?void 0:n.includes("Firefox"),C=(0,l.useRef)(!1),j=(0,l.useRef)(b);(0,l.useEffect)(()=>{var e;j.current=b,!w&&N.current&&(null===(e=window.speechSynthesis)||void 0===e?void 0:e.speaking)&&(C.current=!!B,window.speechSynthesis.cancel(),k())},[b,_]),(0,l.useEffect)(()=>{localStorage.setItem("speechRate",b.toString())},[b]);let k=()=>{var e,t;(null==N?void 0:null===(e=N.current)||void 0===e?void 0:e.currentIndex)||(S(.001),N.current={elements:Array.from(document.querySelectorAll("#container-"+p+" .readable")),currentIndex:0,isPaused:!1}),(null==N?void 0:null===(t=N.current)||void 0===t?void 0:t.isPaused)&&(y(!1),N.current.isPaused=!1);let n=()=>new Promise(e=>{if(N.current){var t,n,r,l,o,c,a,s,i,u,d,v,p,T;let _=N.current.currentIndex,f="data-tts-exclude-children",w=null;try{let e=null===(c=N.current)||void 0===c?void 0:c.elements[_];if(e){if("h1"===e.tagName.toLowerCase()&&e.hasAttribute(f)&&"true"===e.getAttribute(f)){let t=e.cloneNode(!0),n=t.querySelector("#".concat("helper-icons-container"));n&&n.remove(),w=t.textContent}else w=e.textContent}}catch(e){console.error("Error extracting text from element:",e),w=(null===(a=null===(s=N.current)||void 0===s?void 0:s.elements[_])||void 0===a?void 0:a.textContent)||""}let y=new window.SpeechSynthesisUtterance(null!=w?w:"");y.lang=(null==m?void 0:m.language)?null==m?void 0:m.language:"en",y.rate=j.current,y.addEventListener("end",()=>{var t,n,r,l,o,c;let a=C.current;if(C.current=!1,N.current&&(a||N.current.isPaused||(S(Math.min((_+1)/N.current.elements.length*100,100)),N.current.currentIndex++,e(N.current.currentIndex)),N.current.elements.forEach(e=>e.classList.remove("current")),null===(l=N.current.elements[N.current.currentIndex])||void 0===l||l.classList.add("current")),(null!==(o=null==N?void 0:null===(t=N.current)||void 0===t?void 0:t.currentIndex)&&void 0!==o?o:0)>=(null!==(c=null==N?void 0:null===(n=N.current)||void 0===n?void 0:null===(r=n.elements)||void 0===r?void 0:r.length)&&void 0!==c?c:0)){I.cancel(),h(!1);let e=document.querySelectorAll(".readable.current");Array.from(e).map(e=>{e.classList.remove("current")})}}),y.addEventListener("pause",()=>{I.resume()}),_>0&&(null===(i=null==N?void 0:null===(u=N.current)||void 0===u?void 0:u.elements[_-1])||void 0===i||null===(d=i.classList)||void 0===d||d.remove("current"),null===(v=null==N?void 0:null===(p=N.current)||void 0===p?void 0:p.elements[_+1])||void 0===v||null===(T=v.classList)||void 0===T||T.remove("current")),null===(t=null==N?void 0:null===(n=N.current)||void 0===n?void 0:n.elements[_])||void 0===t||null===(r=t.classList)||void 0===r||r.add("current"),N.current.elements.forEach(e=>e.classList.remove("current")),null===(l=N.current.elements[_])||void 0===l||l.classList.add("current");let b=null===(o=N.current.elements[_])||void 0===o?void 0:o.getBoundingClientRect(),g=(null==b?void 0:b.top)+window.scrollY-x-240;if(window.scrollTo(window.scrollX,g),I.speak(y),!B){let e=setInterval(()=>{I.speaking?(I.pause(),I.resume()):clearInterval(e)},14e3)}}});setTimeout(async()=>{for(;N.current&&!N.current.isPaused&&N.current.currentIndex<N.current.elements.length;)await n()},0)},L=()=>{I.cancel(),N.current&&(N.current.isPaused=!0),y(!0),f("pause")},P=()=>{f("play"),k()},R=()=>{null==I||I.cancel(),N.current&&(N.current.isPaused=!!B,N.current.currentIndex=0),S(0),y(!0),h(!1);let t=document.querySelectorAll(".readable.current");if(Array.from(t).map(e=>{e.classList.remove("current")}),(null==e?void 0:e.setShowTextToSpeechOverlay)&&(null==e||e.setShowTextToSpeechOverlay()),null==e?void 0:e.showTextToSpeechOverlay){var n;null==e||null===(n=e.setAccessibilityFocus)||void 0===n||n.call(e)}},E=()=>{T>.001&&(C.current=B&&!0,null==I||I.cancel(),N.current&&(N.current.currentIndex--,B||S(Math.min((N.current.currentIndex+1)/N.current.elements.length*100,100))),f("user"),B?setTimeout(()=>{C.current=!1,k()},150):k())},M=()=>{if(N.current){C.current=!!B,null==I||I.cancel(),N.current.currentIndex++;let e=N.current.elements.length,t=N.current.currentIndex,n=t>=e-1,r=(t+1)/e*100;if(r=Math.floor(r),n&&(r=99),B?n&&S(Math.min(r,100)):S(Math.min(r,100)),t>=e){null==I||I.cancel(),h(!1);let e=document.querySelectorAll(".readable.current");Array.from(e).map(e=>{e.classList.remove("current")});return}}f("user"),B?setTimeout(()=>{C.current=!1,k()},150):k()};(0,l.useEffect)(()=>{B&&setTimeout(()=>{var e,t;f("auto"),(null==N?void 0:null===(e=N.current)||void 0===e?void 0:e.currentIndex)&&(null==N?void 0:null===(t=N.current)||void 0===t?void 0:t.currentIndex)>=1&&k()},1e3)},[]);let O=e=>{S(Math.min(e,100));let t=document.querySelectorAll(".readable.current");Array.from(t).map(e=>{e.classList.remove("current")}),N.current||(N.current={elements:Array.from(document.querySelectorAll("#container-"+p+" .readable")),currentIndex:0,isPaused:!1}),N.current.isPaused=!0;let n=Math.round(N.current.elements.length*e/100);N.current.currentIndex=n,null==I||I.cancel(),k()},A=e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation())},q=t=>{if("Tab"===t.key&&(null==e?void 0:e.showTextToSpeechOverlay)&&!t.shiftKey){var n;null==e||null===(n=e.setFocusOnTabKeyPress)||void 0===n||n.call(e)}},F=(0,l.useRef)(null);return(0,l.useEffect)(()=>{(null==e?void 0:e.showTextToSpeechOverlay)&&F.current&&F.current.focus()},[null==e?void 0:e.showTextToSpeechOverlay]),(0,r.jsxs)("div",{className:s().textToSpeech,"data-testid":"TextToSpeech",children:[(0,r.jsx)("div",{children:(0,r.jsx)("button",{ref:F,className:s().closeIcon,dir:v,"aria-label":"close","data-testid":"closeBtn",onClick:R,onKeyDown:e=>{"Enter"===e.key&&R()},tabIndex:0})}),(0,r.jsxs)("div",{className:s().mediaButtonContainer,children:[(0,r.jsx)("button",{onClick:E,className:s().mediaButtons,"data-testid":"prevBtn","aria-label":a("Previous"),children:(0,r.jsx)("div",{className:s().previousIcon})}),(0,r.jsx)("button",{onClick:()=>{w||0===T||100===T?B?P():k():L()},"aria-label":a(w||0===T||100===T?"Play":"Pause"),"data-testid":"playBtn",className:s().mediaButtons,children:w||0===T||100===T?(0,r.jsx)("div",{className:s().playIcon}):(0,r.jsx)("div",{className:s().pauseIcon})}),(0,r.jsx)("button",{onClick:R,className:s().mediaButtons,"data-testid":"stopBtn","aria-label":a("Stop"),children:(0,r.jsx)("div",{className:s().stopIcon})}),(0,r.jsx)("button",{onClick:M,className:s().mediaButtons,disabled:T>=100,"data-testid":"nxtBtn","aria-label":a("Next"),children:(0,r.jsx)("div",{className:s().nextIcon})})]}),(0,r.jsx)("div",{"data-testid":"sliderWrapper",onKeyDown:A,children:(0,r.jsx)(o.Z,{min:0,max:100,value:T,className:s().customSlider,thumbClassName:"customSlider-thumb",trackClassName:"customSlider-track",markClassName:"customSlider-mark",ariaLabel:a("Slider"),"data-testid":"slider",renderMark:e=>{let t=(null==e?void 0:e.key)?null==e?void 0:e.key:0;return t<T?e.className="customSlider-mark customSlider-mark-before":t===T&&(e.className="customSlider-mark customSlider-mark-active"),(0,r.jsx)("span",{...e})},onSliderClick:e=>{O(e)},onChange:e=>{O(e)}})}),(0,r.jsx)("div",{className:s().completion,children:Math.round(100*T/100)+"%"}),(0,r.jsxs)("div",{className:s().rateButtonContainer,children:[(0,r.jsx)("button",{onClick:()=>g(e=>Math.max(.5,Math.round((e-.25)*100)/100)),"aria-label":a("DecreaseSpeed"),className:"".concat(s().speechRateBtn," ").concat(s().decrementBtn," ").concat(v===d.Nm.RTL?s().decrementBtnrtl:s().decrementBtnltr),"data-testid":"decrementRateBtn",children:(0,r.jsx)("span",{className:s().speechRateIcon})}),(0,r.jsxs)("span",{className:s().speechRateValue,children:[a("ContentSpeed"),":"]}),(0,r.jsx)("span",{"data-testid":"speechRateValue",className:s().speechRateValue,children:b.toFixed(2)+"x"}),(0,r.jsx)("button",{onClick:()=>g(e=>Math.min(2,Math.round((e+.25)*100)/100)),"aria-label":a("IncreaseSpeed"),className:"".concat(s().speechRateBtn," ").concat(s().incrementBtn," ").concat(v===d.Nm.RTL?s().incrementBtnrtl:s().incrementBtnltr),onKeyDown:q,"data-testid":"incrementRateBtn",children:(0,r.jsx)("span",{className:s().speechRateIcon})})]}),(0,r.jsx)("p",{className:"".concat(s().installnotification),children:a("texttospeechinstallationnotification")})]})};t.Z=m},79515:function(e){e.exports={modalPopup:"TextToSpeech_modalPopup__unh2u",title:"TextToSpeech_title__6npqr",modalContent:"TextToSpeech_modalContent__bYf8s",textToSpeech:"TextToSpeech_textToSpeech__Rc4jb",closeIcon:"TextToSpeech_closeIcon__OTPDm",mediaButtonContainer:"TextToSpeech_mediaButtonContainer__TuD7O",previousIcon:"TextToSpeech_previousIcon__Mx5V1",playIcon:"TextToSpeech_playIcon__xUp6r",pauseIcon:"TextToSpeech_pauseIcon__SwOKR",stopIcon:"TextToSpeech_stopIcon__zEqhE",nextIcon:"TextToSpeech_nextIcon__9Zqrq",mediaButtons:"TextToSpeech_mediaButtons__mFdx_",customSlider:"TextToSpeech_customSlider__502Lc",completion:"TextToSpeech_completion__PWBPj",installnotification:"TextToSpeech_installnotification__ouQti","customSlider-mark":"TextToSpeech_customSlider-mark__jhKCT",accordianPopover:"TextToSpeech_accordianPopover__DLExY",textToSpeechIcon:"TextToSpeech_textToSpeechIcon__tO8El",audioIcon:"TextToSpeech_audioIcon__ugNB5",rateButtonContainer:"TextToSpeech_rateButtonContainer__zvvCK",speechRateBtn:"TextToSpeech_speechRateBtn__vUXU5",speechRateIcon:"TextToSpeech_speechRateIcon__d3zxG",incrementBtn:"TextToSpeech_incrementBtn__g3NMZ",incrementBtnltr:"TextToSpeech_incrementBtnltr___JLUc",incrementBtnrtl:"TextToSpeech_incrementBtnrtl__4sDgn",decrementBtn:"TextToSpeech_decrementBtn___kRgG",decrementBtnltr:"TextToSpeech_decrementBtnltr__WS5zq",decrementBtnrtl:"TextToSpeech_decrementBtnrtl__AOBb8",speechRateValue:"TextToSpeech_speechRateValue__El4IN"}}}]);